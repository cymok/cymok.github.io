---
layout: post
tags: Android
---

点击 软键盘 和 EditText 之外区域 隐藏软键盘

利用 Activity 事件分发 判断按压位置是否在 EditText 上 不在则调用关闭逻辑

Activity:
```
override fun dispatchTouchEvent(ev: MotionEvent?): Boolean {
	if (ev?.action == MotionEvent.ACTION_DOWN) {
		val v = currentFocus
		if (!isInputArea(v, ev)) {
			KeyboardUtils.hideSoftInput()
			v?.clearFocus()
		}
	}
	return super.dispatchTouchEvent(ev)
}

private fun isInputArea(v: View?, event: MotionEvent): Boolean {
	if (v != null && v is EditText) {
		val l = intArrayOf(0, 0)
		v.getLocationInWindow(l)
		val left = l[0]
		val top = l[1]
		val bottom = top + v.getHeight()
		val right = left + v.getWidth()
		return event.x > left && event.x < right && event.y > top && event.y < bottom
	}
	return false
}

```
