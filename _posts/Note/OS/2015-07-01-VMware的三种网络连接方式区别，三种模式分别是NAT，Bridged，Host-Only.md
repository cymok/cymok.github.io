---
layout: post
tags: VM
---

# VMware 的三种网络连接方式 NAT，Bridged，Host-Only

关于VMware的三种网络连接方式，NAT，Bridged，Host-Only ，在刚接触的时候通常会遇到主机Ping不通虚拟机而虚拟机能Ping得通主机；
主机与虚拟机互不相通等等网络问题。本文就这三种连接方式作一一说明，也方便以后翻阅当参考用。

首先，要注意安装完VMware后，控制面板\网络和 Internet\网络连接会多出两块虚拟网卡VMnet1、VMnet2，两个网卡各有用途。

## NAT（网络地址转换）

依靠物理主机的VMnet8网卡上网。虚拟机可以互Ping通，前提是物理主机的VMnet8网卡的网关要与虚拟机一样！
如果不在同一个网关，会出现虚拟机能Ping通物理主机，但物理主机无法Ping通虚拟机的情况。注意此种情况也是实际应用场景之一。

1. NAT方式使虚拟机接入外网方便，不需要进行其他配置，只需要物理主机可以上网即可
2. 如果想安装个虚拟机，又不想配置网络，就推荐用NAT方式上网
3. NAT模式下的虚拟系统的TCP/IP配置信息是由VMnet8(NAT)虚拟网络的DHCP服务器提供的，无法进行手工修改，因此虚拟系统也就无法和本局域网中的其他真实主机进行通讯。（不能用NAT配置集群的原因）

## Bridged（桥接）

基于以上的拓扑测试，桥接方式虚拟出来的系统就像是在局域网中单独存在的独立“物理机”一样，它可以访问同一局域网内任何一台机器，也可以单独通过局域网网关或者路由访问外网。不过需要在每台机器上都要去单独配置IP，网关、网段、DNS等。

由于这个虚拟系统是局域网中的一个独立的主机系统，那么就可以手工配置它的TCP/IP配置信息，以实现通过局域网的网关或路由器访问互联网。

利用相同的网关网段配置，Bridged可用来配置集群。

## Host-Only（主机）

虚拟机的TCP/IP配置信息(如IP地址、网关地址、DNS服务器等)，都是由VMnet1(host-only)虚拟网络的DHCP服务器来动态分配的。

这种模式下，所有局域网内所有虚拟机互通，但虚拟机无法访问外网，与外网完全隔离。

此种模式同样可以配置集群，但是集群无法访问外网，比较适合公司内网。
